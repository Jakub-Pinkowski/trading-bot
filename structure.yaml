trading-bot/
├── app/
│   ├── analysis/
│   │   ├── analysis_utils/                       # Analysis-specific utility helpers
│   │   │   ├── __init__.py
│   │   │   ├── analysis_utils.py                 # General calculation utilities
│   │   │   ├── data_cleaning_utils.py            # Data cleaning utilities
│   │   │   └── data_fetching_utils.py            # Data fetching utilities
│   │   ├── __init__.py
│   │   ├── analysis_runner.py                    # Analysis logic coordinator
│   │   ├── data_cleaning.py                      # Data cleaning logic
│   │   ├── data_fetching.py                      # Data fetching logic
│   │   ├── dataset_metrics.py                    # Dataset metrics
│   │   ├── per_trade_metrics.py                  # Per trade metrics
│   │   └── trades_matching.py                    # Matching trades
│   ├── backtesting/
│   │   ├── analysis/                             # Strategy analysis module
│   │   │   ├── __init__.py
│   │   │   ├── constants.py                      # Analysis constants
│   │   │   ├── data_helpers.py                   # DataFrame filtering & calculations
│   │   │   ├── formatters.py                     # CSV formatting helpers
│   │   │   └── strategy_analyzer.py              # Main StrategyAnalyzer class
│   │   ├── cache/                                # Caching system for backtesting
│   │   │   ├── cache_base.py                     # Base cache class
│   │   │   ├── dataframe_cache.py                # Dataframe caching
│   │   │   └── indicators_cache.py               # Indicator caching
│   │   ├── fetching/                             # Historical data fetching from TradingView
│   │   │   ├── __init__.py
│   │   │   ├── data_fetcher.py                   # DataFetcher class for fetching historical data
│   │   │   └── validators.py                     # Validation functions for data quality
│   │   ├── indicators/                           # Technical indicators for backtesting
│   │   │   ├── __init__.py
│   │   │   ├── atr.py                            # Average True Range indicator
│   │   │   ├── bollinger_bands.py                # Bollinger Bands indicator
│   │   │   ├── ema.py                            # Exponential Moving Average indicator
│   │   │   ├── ichimoku_cloud.py                 # Ichimoku Cloud indicator
│   │   │   ├── indicators_utils.py               # General indicators utilities
│   │   │   ├── macd.py                           # Moving Average Convergence Divergence indicator
│   │   │   └── rsi.py                            # Relative Strength Index indicator
│   │   ├── metrics/                              # Metrics calculation modules
│   │   │   ├── __init__.py
│   │   │   ├── per_trade_metrics.py              # Per trade metrics
│   │   │   └── summary_metrics.py                # Summary metrics
│   │   ├── strategies/                           # Trading strategies to backtest
│   │   │   ├── base/                             # Base strategy components
│   │   │   │   ├── __init__.py
│   │   │   │   ├── base_strategy.py              # Base strategy class
│   │   │   │   ├── contract_switch_handler.py    # Contract rollover handling
│   │   │   │   ├── position_manager.py           # Position management logic
│   │   │   │   └── trailing_stop_manager.py      # Trailing stop loss management
│   │   │   ├── __init__.py
│   │   │   ├── bollinger_bands.py                # Bollinger Bands strategy
│   │   │   ├── ema.py                            # EMA Crossover strategy
│   │   │   ├── ichimoku_cloud.py                 # Ichimoku Cloud strategy
│   │   │   ├── macd.py                           # MACD strategy
│   │   │   ├── rsi.py                            # RSI strategy
│   │   │   └── strategy_factory.py               # Strategy creation factory
│   │   ├── testing/                              # Mass testing framework
│   │   │   ├── utils/                            # Test utilities
│   │   │   │   ├── __init__.py
│   │   │   │   ├── dataframe_validators.py       # DataFrame validation functions
│   │   │   │   └── test_preparation.py           # Test combination preparation & filtering
│   │   │   ├── __init__.py
│   │   │   ├── mass_tester.py                    # MassTester class and public API
│   │   │   ├── orchestrator.py                   # Test orchestration & parallel execution
│   │   │   ├── reporting.py                      # Results conversion & saving
│   │   │   └── runner.py                         # Single test execution logic
│   │   ├── validators/                           # Parameter validation framework
│   │   │   ├── __init__.py
│   │   │   ├── base.py                           # Base validator class
│   │   │   ├── bollinger_validator.py            # Bollinger Bands parameter validator
│   │   │   ├── common_validator.py               # Common parameters validator
│   │   │   ├── constants.py                      # Validation constants and thresholds
│   │   │   ├── ema_validator.py                  # EMA parameter validator
│   │   │   ├── ichimoku_validator.py             # Ichimoku Cloud parameter validator
│   │   │   ├── macd_validator.py                 # MACD parameter validator
│   │   │   └── rsi_validator.py                  # RSI parameter validator
│   │   ├── __init__.py
│   │   ├── BACKTESTING_ARCHITECTURE.md           # Architecture documentation
│   │   ├── BACKTESTING_EXAMPLES.md               # Usage examples
│   │   └── BACKTESTING_USER_GUIDE.md             # User guide
│   ├── ibkr/
│   │   ├── __init__.py
│   │   ├── connection.py                         # IBKR API connection and heartbeat scheduler
│   │   ├── contracts.py                          # Contract fetching, selection, and caching
│   │   ├── ibkr_service.py                       # IBKR logic coordinator
│   │   └── orders.py                             # Order placement and position management
│   ├── routes/
│   │   ├── __init__.py
│   │   └── webhook.py                            # Webhook route for TradingView alerts
│   │   ├── connection.py                         # IBKR API connections
│   │   ├── contracts.py                          # Contracts handling
│   │   ├── ibkr_service.py                       # IBKR logic coordinator
│   │   └── orders.py                             # Order execution
│   ├── utils/
│   │   ├── __init__.py
│   │   ├── api_utils.py                          # IBKR REST API request helpers
│   │   ├── file_utils.py                         # JSON file I/O (load_file, save_file)
│   │   ├── generic_utils.py                      # General utilities (symbol parsing)
│   │   ├── logger.py                             # Logger setup
│   │   └── math_utils.py                         # Safe math helpers (divide, average, percentage)
│   └── __init__.py
├── clientportal/                                 # IBKR login gateway
├── data/
│   ├── alerts/                                   # Alerts from IBKR and TradingView
│   │   ├── ibkr_alerts/                          # IBKR alerts
│   │   ├── trades/                               # Trades
│   │   └── tv_alerts/                            # TradingView alerts
│   ├── analysis/                                 # Performance analysis
│   │   ├── analysis_ibkr_alerts/                 # Performance analysis based on IBKR alerts
│   │   ├── analysis_trades/                      # Performance analysis based on trades
│   │   └── analysis_tv_alerts/                   # Performance analysis based on TradingView alerts
│   ├── backtesting/                              # Backtesting
│   │   ├── cache/                                # Cache storage for backtesting
│   │   ├── csv_results/                          # CSV results from backtesting
│   │   └── mass_test_results_all.parquet         # Mass backtesting results
│   ├── contracts/                                # Contracts ids
│   └── historical_data/                          # Historical data from TradingView
│   │   ├── 1!/                                   # Front month
│   │   ├── 2!/                                   # Next month
│   │   └── contract_switch_dates.yaml            # Configuration for contract switch dates
├── futures_config/                               # Futures symbols configuration and utilities
│   ├── __init__.py
│   ├── categories.py                             # Category definitions for futures symbols
│   ├── helpers.py                                # Helper functions for futures specs
│   ├── symbol_groups.py                          # Symbol correlation groups (mini/micro contracts)
│   ├── symbol_mapping.py                         # TradingView to IBKR symbol mapping
│   └── symbol_specs.py                           # Symbol specifications (exchange, tick size, etc.)
├── logs/
│   ├── debug.log                                 # Debug logs
│   ├── error.log                                 # Error logs
│   └── info.log                                  # Info logs
├── strategies/
│   ├── indicators/                               # Indicators
│   ├── indicators_testing/                       # Testing indicators
│   ├── strategies/                               # Strategies
│   └── tv_indicators/                            # TradingView indicators
├── tests/
│   ├── analysis/                                 # Analysis tests (deprecated module, pending rewrite)
│   │   └── analysis_utils/                       # Analysis utility tests
│   ├── backtesting/
│   │   ├── analysis/                             # Strategy analyzer tests
│   │   ├── cache/                                # Cache tests
│   │   ├── fetching/                             # Data fetcher tests
│   │   ├── fixtures/                             # Shared fixtures: mock OHLCV data, strategy instances, assertions
│   │   ├── indicators/                           # Indicator tests
│   │   ├── integration/                          # Integration tests
│   │   ├── metrics/                              # Metrics tests
│   │   ├── strategies/                           # Strategy tests
│   │   │   └── base/                             # Base strategy component tests
│   │   ├── testing/                              # Mass testing framework tests
│   │   │   └── utils/                            # Testing utility tests
│   │   └── validators/                           # Validator tests
│   ├── futures_config/                           # Futures config tests
│   ├── ibkr/                                     # IBKR integration tests
│   ├── routes/                                   # Route handler tests
│   ├── utils/                                    # Utility module tests
│   └── conftest.py                               # Top-level: pytest_plugins registration for backtesting fixtures
│   ├── routes/                                   # Routes tests
│   ├── ibkr/                                     # IBKR tests
│   └── utils/                                    # Utils tests
├── .env                                          # Configuration secrets
├── .github/                                      # GitHub configuration
│   ├── copilot-instructions.md                   # GitHub Copilot instructions
│   ├── dependabot.yml                            # Dependency updates configuration
│   └── prompts/                                  # Documentation and summaries
├── .gitignore                                    # Files to ignore
├── analyze_strategies.py                         # Analyze strategies
├── CLAUDE.md                                     # Claude Code guidance
├── config.py                                     # App configuration
├── fetch_data.py                                 # Fetch TradingView historical data
├── mass_backtest.py                              # Run mass backtesting
├── README.md                                     # Project overview
├── requirements.txt                              # Dependencies
├── run.py                                        # App startup script
├── structure.yaml                                # App's structure
└── pytest.ini                                    # Pytest configuration

# Analysis
# NOTE: The whole analysis is deprecated, to be rewritten to match backtesting structure
# TODO [MEDIUM]: Rewrite analysis logic using classes

# Backtesting
# NOTE: Profit estimation is not accurate due to changing margin requirements over time
# TODO [HIGH]: Check whether I use adjusted or not adjusted data from TradingView
# BUG [HIGH]: Fix contract switch dates
# TODO [MEDIUM]: Fill in all the missing data for all the symbols in the futures_config folder
# TODO [MEDIUM]: Implement segment testing for below 15m intervals to bypass the date gaps
# TODO [MEDIUM]: Implement out-of-sample data testing
# TODO [MEDIUM]: Backtest intervals within a timeframe separately. For example split the time into 4 sections
# TODO [MEDIUM]: Run extensive backtesting
# TODO [LOW]: Add an automatic Github Action to run the fetching on a monthly basis
# TODO [LOW]: Add new strategies
# TODO [LOW]: Integrate data fetching from IBKR

# IBKR
# BUG [HIGH]: I might be trading wrong contract because of the 60days cutoff, it needs to be completely rewritten to always trade the next contract
# TODO [HIGH]: Handle near delivery cases where I still hold a position close to the Close-Out date
# TODO [MEDIUM]: Move contract switch dates into the contracts folder

# Tests
# TODO [LOW]: Add e2e tests
# TODO [LOW]: Fix all the grammar errors

# Recurring
# TODO [LOW]: Download new historic data on a monthly basis [last update on 2026.02.23]
# TODO [LOW]: Update contract switch dates [last update in 2025.05]